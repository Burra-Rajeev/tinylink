{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/New%20project/tinylink/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\ndeclare global {\r\n    // allow global prisma in dev to avoid creating multiple instances\r\n    var prisma: PrismaClient | undefined;\r\n}\r\n\r\nconst prisma = global.prisma || new PrismaClient();\r\n\r\nif (process.env.NODE_ENV !== \"production\") global.prisma = prisma;\r\n\r\nexport default prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAOA,MAAM,SAAS,OAAO,MAAM,IAAI,IAAI,6IAAY;AAEhD,wCAA2C,OAAO,MAAM,GAAG;uCAE5C"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///D:/New%20project/tinylink/pages/api/links/%5Bcode%5D.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from \"next\";\r\nimport prisma from \"../../../lib/prisma\";\r\n\r\nconst CODE_REGEX = /^[A-Za-z0-9]{6,8}$/;\r\n\r\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\r\n    const code = (req.query.code || \"\").toString();\r\n\r\n    if (!CODE_REGEX.test(code)) {\r\n        return res.status(400).json({ error: \"Invalid code format\" });\r\n    }\r\n\r\n    if (req.method === \"GET\") {\r\n        const link = await prisma.link.findUnique({ where: { code } });\r\n        if (!link) return res.status(404).json({ error: \"Not found\" });\r\n        return res.status(200).json(link);\r\n    }\r\n\r\n    if (req.method === \"DELETE\") {\r\n        try {\r\n            await prisma.link.delete({ where: { code } });\r\n            return res.status(204).end();\r\n        } catch {\r\n            return res.status(404).json({ error: \"Not found\" });\r\n        }\r\n    }\r\n\r\n    res.setHeader(\"Allow\", [\"GET\", \"DELETE\"]);\r\n    return res.status(405).end(\"Method Not Allowed\");\r\n}\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM,aAAa;AAEJ,eAAe,QAAQ,GAAmB,EAAE,GAAoB;IAC3E,MAAM,OAAO,CAAC,IAAI,KAAK,CAAC,IAAI,IAAI,EAAE,EAAE,QAAQ;IAE5C,IAAI,CAAC,WAAW,IAAI,CAAC,OAAO;QACxB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAsB;IAC/D;IAEA,IAAI,IAAI,MAAM,KAAK,OAAO;QACtB,MAAM,OAAO,MAAM,iHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE;YAAK;QAAE;QAC5D,IAAI,CAAC,MAAM,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAY;QAC5D,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;IAChC;IAEA,IAAI,IAAI,MAAM,KAAK,UAAU;QACzB,IAAI;YACA,MAAM,iHAAM,CAAC,IAAI,CAAC,MAAM,CAAC;gBAAE,OAAO;oBAAE;gBAAK;YAAE;YAC3C,OAAO,IAAI,MAAM,CAAC,KAAK,GAAG;QAC9B,EAAE,OAAM;YACJ,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAAY;QACrD;IACJ;IAEA,IAAI,SAAS,CAAC,SAAS;QAAC;QAAO;KAAS;IACxC,OAAO,IAAI,MAAM,CAAC,KAAK,GAAG,CAAC;AAC/B"}}]
}